<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Second War</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    body{
      display:flex;
      justify-content:center;
      align-items:flex-end; /* 하단 초록 영역 중심 근처 */
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif;
      background:#000; /* 여백 컬러 */
      overflow:hidden;
    }
    /* 배경: 화면 맞춤 + 비율 유지 */
    .bg{
      position:fixed; inset:0;
      width:100%; height:100%;
      object-fit:contain;   /* 비율 유지하며 축소/확대 */
      z-index:-1;
      pointer-events:none;
      user-select:none;
    }

    /* 공통 카드 */
    .card{
      background: rgba(255,255,255,0.94);
      backdrop-filter: blur(2px);
      border-radius: 14px;
      box-shadow: 0 10px 26px rgba(0,0,0,.25);
      padding: 18px 20px;
    }

    /* 처음 버튼 두 개 */
    .btn-box{
      display:flex; gap:16px; margin-bottom: 12vh;
    }
    .btn{
      font-size: clamp(16px, 2.1vw, 20px);
      padding: 12px 22px;
      border:0; border-radius:12px;
      background:#fff; color:#222; font-weight:700;
      cursor:pointer;
      box-shadow: 0 8px 22px rgba(0,0,0,.25);
      transition: transform .15s ease, background .15s ease, box-shadow .15s ease;
    }
    .btn:hover{ transform:translateY(-1px); background:#f6f6f6; }
    .btn:active{ transform:translateY(0); box-shadow:0 6px 16px rgba(0,0,0,.25); }

    /* 폼 */
    .form-box{
      display:none; margin-bottom: 12vh; min-width: min(90vw, 380px);
    }
    .form-title{ font-weight:800; font-size:18px; margin-bottom:10px; text-align:center; }
    .field{ display:flex; flex-direction:column; gap:6px; margin:10px 0; }
    .label{ font-size:14px; color:#444; }
    .input{
      font-size:16px; padding:12px 12px;
      border:1px solid #ddd; border-radius:10px;
      outline:none;
    }
    .row{ display:flex; gap:10px; margin-top:8px; }
    .hint{ font-size:12px; color:#666; margin-top:6px; text-align:center; }

    /* “새 화면” */
    .game-screen{
      position:fixed; inset:0;
      display:none;
      background:#0b1220;
      color:#fff;
    }
    .game-inner{
      height:100%;
      display:grid; place-items:center; text-align:center;
      padding:24px;
    }
    .title{
      font-size:clamp(24px, 5vw, 40px);
      margin-bottom:10px;
    }

    /* 작은 높이에서 버튼/폼 살짝 올림 */
    @media (max-height: 600px){
      .btn-box, .form-box{ margin-bottom: 9vh; }
    }
  </style>
</head>
<body>
  <!-- 배경 -->
  <img src="./image/title.png" alt="The Second War Title" class="bg">

  <!-- 초기: 로그인/가입 버튼 -->
  <div class="btn-box" id="startButtons">
    <button class="btn" id="loginBtn">로그인</button>
    <button class="btn" id="signupBtn">가입하기</button>
  </div>

  <!-- 폼 카드 (가입/로그인 공용 UI) -->
  <div class="form-box card" id="formBox" aria-hidden="true">
    <div class="form-title" id="formTitle">가입하기</div>
    <div class="field">
      <label class="label" for="nickname">닉네임</label>
      <input class="input" id="nickname" type="text" placeholder="예) cardwar" autocomplete="username">
    </div>
    <div class="field">
      <label class="label" for="password">패스워드</label>
      <input class="input" id="password" type="password" placeholder="패스워드" autocomplete="current-password">
    </div>
    <div class="row">
      <button class="btn" id="primaryBtn">저장</button>
      <button class="btn" id="cancelBtn" style="background:#f2f2f2;">취소</button>
    </div>
    <div class="hint" id="hint"></div>
  </div>

  <!-- 새 화면(로그인 성공 후) -->
  <div class="game-screen" id="gameScreen">
    <div class="game-inner">
      <div>
        <div class="title">환영합니다! 🎮</div>
        <div id="welcome"></div>
        <div style="margin-top:18px;">
          <button class="btn" id="backBtn">처음으로</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* 간단 저장: 로컬스토리지 (학습용) */
    const STORAGE_KEY = 'tsw_users'; // { nickname: password, ... }

    const $ = (id)=>document.getElementById(id);
    const startButtons = $('startButtons');
    const formBox = $('formBox');
    const formTitle = $('formTitle');
    const nicknameEl = $('nickname');
    const passwordEl = $('password');
    const primaryBtn = $('primaryBtn');
    const cancelBtn = $('cancelBtn');
    const hint = $('hint');
    const gameScreen = $('gameScreen');
    const welcome = $('welcome');

    let mode = 'signup'; // 'signup' | 'login'

    function showButtons(){
      formBox.style.display = 'none';
      startButtons.style.display = 'flex';
      gameScreen.style.display = 'none';
      hint.textContent = '';
      nicknameEl.value = '';
      passwordEl.value = '';
    }
    function showForm(newMode){
      mode = newMode;
      startButtons.style.display = 'none';
      formBox.style.display = 'block';
      formBox.setAttribute('aria-hidden','false');
      formTitle.textContent = (mode === 'signup') ? '가입하기' : '로그인';
      primaryBtn.textContent = (mode === 'signup') ? '저장' : '접속';
      hint.textContent = (mode === 'signup')
        ? '닉네임과 패스워드를 입력한 뒤 [저장]을 누르세요.'
        : '가입한 닉네임/패스워드로 [접속]을 누르세요.';
      nicknameEl.focus();
    }
    function getUsers(){
      try{
        return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
      }catch(e){
        return {};
      }
    }
    function setUsers(obj){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(obj));
    }

    // 이벤트
    $('signupBtn').addEventListener('click', ()=> showForm('signup'));
    $('loginBtn').addEventListener('click',  ()=> showForm('login'));
    cancelBtn.addEventListener('click', showButtons);

    primaryBtn.addEventListener('click', ()=>{
      const nick = nicknameEl.value.trim();
      const pass = passwordEl.value;

      if(!nick || !pass){
        hint.textContent = '닉네임과 패스워드를 모두 입력해 주세요.';
        return;
      }
      const users = getUsers();

      if(mode === 'signup'){
        if(users[nick]){
          hint.textContent = '이미 존재하는 닉네임입니다. 다른 닉네임을 사용해 보세요.';
          return;
        }
        users[nick] = pass; // ⚠️ 평문 저장(학습용)
        setUsers(users);
        alert('저장되었습니다. 이제 로그인할 수 있어요!');
        showButtons();

      }else{ // login
        if(!users[nick]){
          hint.textContent = '해당 닉네임이 존재하지 않습니다. 먼저 가입해 주세요.';
          return;
        }
        if(users[nick] !== pass){
          hint.textContent = '패스워드가 올바르지 않습니다.';
          return;
        }
        // 로그인 성공 → 새 화면
        startButtons.style.display = 'none';
        formBox.style.display = 'none';
        gameScreen.style.display = 'block';
        welcome.textContent = `닉네임: ${nick}`;
      }
    });

    $('backBtn').addEventListener('click', showButtons);

    // 엔터 키로 제출
    [nicknameEl, passwordEl].forEach(el=>{
      el.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter') primaryBtn.click();
      });
    });
  </script>

  <!-- 배경 이미지 소스 -->
  <img src="./image/title.png" alt="" class="bg" aria-hidden="true">
</body>
</html>


