<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The Second War</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    body{
      display:flex;
      justify-content:center;
      align-items:flex-end; /* í•˜ë‹¨ ì´ˆë¡ ì˜ì—­ ì¤‘ì‹¬ ê·¼ì²˜ */
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif;
      background:#000; /* ì—¬ë°± ì»¬ëŸ¬ */
      overflow:hidden;
    }
    /* ë°°ê²½: í™”ë©´ ë§ì¶¤ + ë¹„ìœ¨ ìœ ì§€ */
    .bg{
      position:fixed; inset:0;
      width:100%; height:100%;
      object-fit:contain;   /* ë¹„ìœ¨ ìœ ì§€í•˜ë©° ì¶•ì†Œ/í™•ëŒ€ */
      z-index:-1;
      pointer-events:none;
      user-select:none;
    }

    /* ê³µí†µ ì¹´ë“œ */
    .card{
      background: rgba(255,255,255,0.94);
      backdrop-filter: blur(2px);
      border-radius: 14px;
      box-shadow: 0 10px 26px rgba(0,0,0,.25);
      padding: 18px 20px;
    }

    /* ì²˜ìŒ ë²„íŠ¼ ë‘ ê°œ */
    .btn-box{
      display:flex; gap:16px; margin-bottom: 12vh;
    }
    .btn{
      font-size: clamp(16px, 2.1vw, 20px);
      padding: 12px 22px;
      border:0; border-radius:12px;
      background:#fff; color:#222; font-weight:700;
      cursor:pointer;
      box-shadow: 0 8px 22px rgba(0,0,0,.25);
      transition: transform .15s ease, background .15s ease, box-shadow .15s ease;
    }
    .btn:hover{ transform:translateY(-1px); background:#f6f6f6; }
    .btn:active{ transform:translateY(0); box-shadow:0 6px 16px rgba(0,0,0,.25); }

    /* í¼ */
    .form-box{
      display:none; margin-bottom: 12vh; min-width: min(90vw, 380px);
    }
    .form-title{ font-weight:800; font-size:18px; margin-bottom:10px; text-align:center; }
    .field{ display:flex; flex-direction:column; gap:6px; margin:10px 0; }
    .label{ font-size:14px; color:#444; }
    .input{
      font-size:16px; padding:12px 12px;
      border:1px solid #ddd; border-radius:10px;
      outline:none;
    }
    .row{ display:flex; gap:10px; margin-top:8px; }
    .hint{ font-size:12px; color:#666; margin-top:6px; text-align:center; }

    /* â€œìƒˆ í™”ë©´â€ */
    .game-screen{
      position:fixed; inset:0;
      display:none;
      background:#0b1220;
      color:#fff;
    }
    .game-inner{
      height:100%;
      display:grid; place-items:center; text-align:center;
      padding:24px;
    }
    .title{
      font-size:clamp(24px, 5vw, 40px);
      margin-bottom:10px;
    }

    /* ì‘ì€ ë†’ì´ì—ì„œ ë²„íŠ¼/í¼ ì‚´ì§ ì˜¬ë¦¼ */
    @media (max-height: 600px){
      .btn-box, .form-box{ margin-bottom: 9vh; }
    }
  </style>
</head>
<body>
  <!-- ë°°ê²½ -->
  <img src="./image/title.png" alt="The Second War Title" class="bg">

  <!-- ì´ˆê¸°: ë¡œê·¸ì¸/ê°€ì… ë²„íŠ¼ -->
  <div class="btn-box" id="startButtons">
    <button class="btn" id="loginBtn">ë¡œê·¸ì¸</button>
    <button class="btn" id="signupBtn">ê°€ì…í•˜ê¸°</button>
  </div>

  <!-- í¼ ì¹´ë“œ (ê°€ì…/ë¡œê·¸ì¸ ê³µìš© UI) -->
  <div class="form-box card" id="formBox" aria-hidden="true">
    <div class="form-title" id="formTitle">ê°€ì…í•˜ê¸°</div>
    <div class="field">
      <label class="label" for="nickname">ë‹‰ë„¤ì„</label>
      <input class="input" id="nickname" type="text" placeholder="ì˜ˆ) cardwar" autocomplete="username">
    </div>
    <div class="field">
      <label class="label" for="password">íŒ¨ìŠ¤ì›Œë“œ</label>
      <input class="input" id="password" type="password" placeholder="íŒ¨ìŠ¤ì›Œë“œ" autocomplete="current-password">
    </div>
    <div class="row">
      <button class="btn" id="primaryBtn">ì €ì¥</button>
      <button class="btn" id="cancelBtn" style="background:#f2f2f2;">ì·¨ì†Œ</button>
    </div>
    <div class="hint" id="hint"></div>
  </div>

  <!-- ìƒˆ í™”ë©´(ë¡œê·¸ì¸ ì„±ê³µ í›„) -->
  <div class="game-screen" id="gameScreen">
    <div class="game-inner">
      <div>
        <div class="title">í™˜ì˜í•©ë‹ˆë‹¤! ğŸ®</div>
        <div id="welcome"></div>
        <div style="margin-top:18px;">
          <button class="btn" id="backBtn">ì²˜ìŒìœ¼ë¡œ</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ê°„ë‹¨ ì €ì¥: ë¡œì»¬ìŠ¤í† ë¦¬ì§€ (í•™ìŠµìš©) */
    const STORAGE_KEY = 'tsw_users'; // { nickname: password, ... }

    const $ = (id)=>document.getElementById(id);
    const startButtons = $('startButtons');
    const formBox = $('formBox');
    const formTitle = $('formTitle');
    const nicknameEl = $('nickname');
    const passwordEl = $('password');
    const primaryBtn = $('primaryBtn');
    const cancelBtn = $('cancelBtn');
    const hint = $('hint');
    const gameScreen = $('gameScreen');
    const welcome = $('welcome');

    let mode = 'signup'; // 'signup' | 'login'

    function showButtons(){
      formBox.style.display = 'none';
      startButtons.style.display = 'flex';
      gameScreen.style.display = 'none';
      hint.textContent = '';
      nicknameEl.value = '';
      passwordEl.value = '';
    }
    function showForm(newMode){
      mode = newMode;
      startButtons.style.display = 'none';
      formBox.style.display = 'block';
      formBox.setAttribute('aria-hidden','false');
      formTitle.textContent = (mode === 'signup') ? 'ê°€ì…í•˜ê¸°' : 'ë¡œê·¸ì¸';
      primaryBtn.textContent = (mode === 'signup') ? 'ì €ì¥' : 'ì ‘ì†';
      hint.textContent = (mode === 'signup')
        ? 'ë‹‰ë„¤ì„ê³¼ íŒ¨ìŠ¤ì›Œë“œë¥¼ ì…ë ¥í•œ ë’¤ [ì €ì¥]ì„ ëˆ„ë¥´ì„¸ìš”.'
        : 'ê°€ì…í•œ ë‹‰ë„¤ì„/íŒ¨ìŠ¤ì›Œë“œë¡œ [ì ‘ì†]ì„ ëˆ„ë¥´ì„¸ìš”.';
      nicknameEl.focus();
    }
    function getUsers(){
      try{
        return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
      }catch(e){
        return {};
      }
    }
    function setUsers(obj){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(obj));
    }

    // ì´ë²¤íŠ¸
    $('signupBtn').addEventListener('click', ()=> showForm('signup'));
    $('loginBtn').addEventListener('click',  ()=> showForm('login'));
    cancelBtn.addEventListener('click', showButtons);

    primaryBtn.addEventListener('click', ()=>{
      const nick = nicknameEl.value.trim();
      const pass = passwordEl.value;

      if(!nick || !pass){
        hint.textContent = 'ë‹‰ë„¤ì„ê³¼ íŒ¨ìŠ¤ì›Œë“œë¥¼ ëª¨ë‘ ì…ë ¥í•´ ì£¼ì„¸ìš”.';
        return;
      }
      const users = getUsers();

      if(mode === 'signup'){
        if(users[nick]){
          hint.textContent = 'ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ë‹‰ë„¤ì„ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ë‹‰ë„¤ì„ì„ ì‚¬ìš©í•´ ë³´ì„¸ìš”.';
          return;
        }
        users[nick] = pass; // âš ï¸ í‰ë¬¸ ì €ì¥(í•™ìŠµìš©)
        setUsers(users);
        alert('ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œ ë¡œê·¸ì¸í•  ìˆ˜ ìˆì–´ìš”!');
        showButtons();

      }else{ // login
        if(!users[nick]){
          hint.textContent = 'í•´ë‹¹ ë‹‰ë„¤ì„ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë¨¼ì € ê°€ì…í•´ ì£¼ì„¸ìš”.';
          return;
        }
        if(users[nick] !== pass){
          hint.textContent = 'íŒ¨ìŠ¤ì›Œë“œê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.';
          return;
        }
        // ë¡œê·¸ì¸ ì„±ê³µ â†’ ìƒˆ í™”ë©´
        startButtons.style.display = 'none';
        formBox.style.display = 'none';
        gameScreen.style.display = 'block';
        welcome.textContent = `ë‹‰ë„¤ì„: ${nick}`;
      }
    });

    $('backBtn').addEventListener('click', showButtons);

    // ì—”í„° í‚¤ë¡œ ì œì¶œ
    [nicknameEl, passwordEl].forEach(el=>{
      el.addEventListener('keydown', (e)=>{
        if(e.key === 'Enter') primaryBtn.click();
      });
    });
  </script>

  <!-- ë°°ê²½ ì´ë¯¸ì§€ ì†ŒìŠ¤ -->
  <img src="./image/title.png" alt="" class="bg" aria-hidden="true">
</body>
</html>


